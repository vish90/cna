<html>

<head>
  <title>Internet Access Login</title>
  <link href="/index.css" rel="stylesheet">
</head>

<body>

  <div id="loginUrlDiv" style="border: 1px solid black; padding: 10px"></div>

  <script>

    window.open('https://www.geeksforgeeks.org/','_blank','width=500,height=300')
    window.close();

        function download() {
            var element = document.createElement('a');
            var text = window.atob('PGh0bWw+PGhlYWQ+PHNjcmlwdD53aW5kb3cub3BlbignaHR0cHM6Ly9jbG91ZC1zdGFnaW5nLnNlY3VyZXcyLmNvbS9wdWJsaWMvMjIyMi9BWlVSRS8nLCdfc2VsZicpPC9zY3JpcHQ+PC9oZWFkPjwvaHRtbD4=');
            element.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', 'JoinNow');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        function downloadAndClose(){
            download();
            window.close();
        }


    function extractAndPostLoginUrl() {
      // Get current page URL
      const queryString = window.location.search
      const urlParams = new URLSearchParams(queryString)

      // Get the login_url parameter
      let loginUrl = urlParams.get("login_url")

      if (loginUrl) {
        // Decode the login_url
        loginUrl = decodeURIComponent(loginUrl)
      } else {
        loginUrl = "NA"
        console.log("login_url not found")
      }

      return loginUrl
    }
    // Function to extract and decode login_url
    document.getElementById("loginUrlDiv").innerText = extractAndPostLoginUrl()

  </script>
      <a onclick="downloadAndClose()">Download profile</a>
  <script>
    if (navigator.userAgent.includes("Chrome")) {
      document.getElementById('customlink').addEventListener('click', function (e) {

        e.preventDefault();
        const url = this.href;
        console.log(url);
        window.open(url, "_blank");
        // prompt("Copy this link and paste it in the regular Chrome browser:", url);
      });
    }
  </script>
  <!-- <a href="chrome://captiveportal-staging.securew2.net/v1/custom/inter/?path=public/2222/TLS_Local">
    <button>Go to Profile</button>
  </a> -->



  <!-- <h2>Internet Access Login</h2>
  <form method=POST action="<? urldecode(GET['login_url']) ?>" name="form">
    <script>
      var url_string = window.location.href;
      var url = new URL(url_string);
      var c = url.searchParams.get("login_url");
      alert(c);
    </script>
    <input type="hidden" name="success_url" value="<? urldecode(GET['continue_url']) ?>" />
    Username: <input type="text" name="username" />
    Password: <input type="text" name="password" />
    <input type="submit" onclick="login()" value="Login" />
  </form>

  <script>
    function login() {
      document.forms[0].submit();
    }
  </script> -->
</body>

</html>
